<div class="container">
  <div class="content">
    <div class="inner">
      <h1>Willkommen {{ user }}</h1>
      <div>
        <mat-card appearance="raised">
          <mat-card-header
            ><mat-card-title
              >Deine kommenden Termine</mat-card-title
            ></mat-card-header
          >
          <mat-card-content><p>keine</p></mat-card-content>
          <mat-card-actions align="end">
            <button mat-button>weitere</button>
          </mat-card-actions>
        </mat-card>
        <mat-card appearance="raised">
          <mat-card-header
            ><mat-card-title>Termin-Details</mat-card-title></mat-card-header
          >
          <mat-card-content><p>keine</p></mat-card-content>
          <mat-card-actions align="end">
            <button mat-button>bearbeiten</button>
          </mat-card-actions>
        </mat-card>
      </div>

      <div class="guiding-text">
        <span>Deine Planung</span><mat-divider [vertical]="true"></mat-divider>

        @if (activeMode() === 0) {<button mat-flat-button color="primary">
          Info</button
        >} @else {<button mat-stroked-button (click)="setActiveMode(0)">
          Info</button
        >} @if (activeMode() === 1) {<button mat-flat-button color="primary">
          Tage auswählen</button
        >} @else {<button mat-stroked-button (click)="setActiveMode(1)">
          Tage auswählen</button
        >} @if (activeMode() === 2) {<button mat-flat-button color="primary">
          Zeiten bearbeiten</button
        >} @else {<button mat-stroked-button (click)="setActiveMode(2)">
          Zeiten bearbeiten</button
        >}
      </div>
      @if (activeMode() === 0) {
      <div class="dates-info-container">
        <app-dates-info></app-dates-info>
      </div>
      } @if (activeMode() === 1) {
      <div class="month-card-container">
        @for (month of monthsToDisplay; track $index) {
        <div>
          <app-month-display [inputMonth]="month"></app-month-display
          ><button
            mat-fab
            (click)="addMonth()"
            aria-label="button with an add icon"
          >
            <mat-icon>add</mat-icon>
          </button>
        </div>
        }
      </div>
      } @if (activeMode() === 2) {
      <div class="timeslot-outer">
        <div class="timeslot-card-container">
          @for (month of monthsToDisplay; track $index) {
          <div>
            <app-choose-timeslots [inputMonth]="month"></app-choose-timeslots>
          </div>
          }
        </div>
        <div class="controls-container">
          <div>
            <button mat-stroked-button (click)="toggleAll('on')">
              Alle auswählen
            </button>
          </div>
          <div class="weekday-row">
            <span>Nach Wochentag auswählen</span>
            <div>
              @for (day of dayString; track day) {
              <button
                mat-flat-button
                *ngIf="dayToggledOn[day[0]] === true"
                (click)="toggleWeekday(day[0])"
                color="primary"
              >
                {{ day[1] }}
              </button>
              <button
                mat-stroked-button
                *ngIf="dayToggledOn[day[0]] === false"
                (click)="toggleWeekday(day[0])"
              >
                {{ day[1] }}</button
              >}
            </div>
          </div>
          <div class="edit-row">
            <button mat-fab extended (click)="openEditTimeslots()">
              <mat-icon>edit</mat-icon>bearbeiten
            </button>
            <button mat-button (click)="toggleAll('off')">
              Auswahl löschen
            </button>
          </div>
        </div>
      </div>
      }
    </div>
  </div>
</div>
