@if (pending) {<mat-progress-bar mode="indeterminate"></mat-progress-bar>} @else
{
<div class="spacer"></div>
}
<div class="outer">
  <div class="inner">
    <h2 mat-dialog-title>Name ändern</h2>
    <form action="" [formGroup]="formData">
      <mat-dialog-content class="formfield">
        <p>Bitte gib den gewünschten Namen ein.</p>
        <div>
          <mat-form-field>
            <mat-label>Vorname</mat-label>
            <input
              matInput
              placeholder="Vorname"
              [formControl]="formData.controls.firstname"
              (blur)="updateErrorMessage('firstname')"
              required
            />
            @if (formData.controls.firstname.invalid) {
            <mat-error>{{ errorMessage.firstname }}</mat-error>
            } </mat-form-field
          ><mat-form-field>
            <mat-label>Nachname</mat-label>
            <input
              matInput
              placeholder="Nachname"
              [formControl]="formData.controls.lastname"
              (blur)="updateErrorMessage('lastname')"
              required
            />
            @if (formData.controls.lastname.invalid) {
            <mat-error>{{ errorMessage.lastname }}</mat-error>
            }
          </mat-form-field>
        </div>
      </mat-dialog-content>
      <div>
        <mat-dialog-actions>
          <div class="button-row">
            <button
              mat-flat-button
              color="primary"
              type="submit"
              [disabled]="formData.invalid || pending"
              (click)="changeName()"
            >
              ändern
            </button>
            <button
              mat-button
              color="primary"
              [disabled]="pending"
              (click)="closeDialog()"
            >
              abbrechen
            </button>
          </div>
        </mat-dialog-actions>
      </div>
    </form>
  </div>
</div>
